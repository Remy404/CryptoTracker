---
import Layout from '../layouts/Layout.astro';
import MarketOverview from '../components/MarketOverview.jsx';
import AddTransaction from '../components/AddTransaction.jsx';
import PortfolioAccordion from '../components/PortfolioAccordion.jsx';
---

<Layout title="Chocolabs - Crypto Tracker">
	<main class="dashboard-container">
		<header class="header">
			<h1 class="text-gradient">CryptoTracker (Beta)</h1>
			<p class="subtitle">Real-time tracking for your investment portfolio</p>
		</header>
		
		<div class="dashboard-grid">
			{/* Tarjeta de Precio Bitcoin (Izquierda) */}
			<div class="price-wrapper glass-card">
				<MarketOverview client:load />
			</div>

			{/* Formulario de Agregar (Derecha) */}
			<div class="form-wrapper glass-card">
				<AddTransaction client:load />
			</div>

			{/* 2. AQUÍ VA EL PORTAFOLIO COMPLETO (Abajo, ancho completo) */}
			<div class="portfolio-wrapper">
				<h3 class="section-title">Your Assets</h3>
				<PortfolioAccordion client:load />
			</div>
		</div>
	</main>
</Layout>

<style>
	.dashboard-container {
		max-width: 1200px;
		margin: 0 auto;
		padding: 4rem 1.5rem;
	}

	.header { text-align: center; margin-bottom: 3rem; }
	h1 { font-size: 3.5rem; font-weight: 800; margin: 0; letter-spacing: -1px; }
	.subtitle { color: var(--text-muted); font-size: 1.1rem; margin-top: 0.5rem; }
	
	.section-title { color: #fff; margin-bottom: 1rem; font-weight: 600; font-size: 1.5rem; margin-top: 2rem;}

	/* GRID LAYOUT */
	.dashboard-grid {
		display: grid;
		grid-template-columns: 1fr 1.5fr;
		gap: 2rem;
		align-items: start;
	}

	/* El acordeón ocupa todo el ancho abajo */
	.portfolio-wrapper {
		grid-column: span 2;
		grid-column: 1 / -1; /* Esto fuerza a ocupar TODAS las columnas (Izquierda a Derecha) */
		width: 100%;         /* Asegura que use el 100% del espacio disponible */
		margin-top: 2rem;    /* Empuja hacia abajo para despegase del "Bitcoin Price" */
		position: relative;  /* Ayuda con el z-index */
		z-index: 10;
	}

	@media (max-width: 900px) {
		.dashboard-grid { grid-template-columns: 1fr; }
		.portfolio-wrapper { grid-column: span 1; }
	}
</style>